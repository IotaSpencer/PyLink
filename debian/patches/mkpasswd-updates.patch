From: James Lu <james@overdrivenetworks.com>
Subject: Install pylink-mkpasswd and allow secure getpass input

This backports commits https://github.com/GLolol/PyLink/commit/62c4b79e04
and https://github.com/GLolol/PyLink/commit/0d99bc62d2 from Git master.

diff --git a/pylink-mkpasswd b/pylink-mkpasswd
index ce5d2b7..f6ec18f 100755
--- a/pylink-mkpasswd
+++ b/pylink-mkpasswd
@@ -4,14 +4,23 @@ Password hashing utility for PyLink IRC Services.
 """
 
 from pylinkirc.coremods.login import pwd_context
+import getpass
 
 if __name__ == '__main__':
     import argparse
 
     parser = argparse.ArgumentParser(description='Hashes a password for use with PyLink IRC Services.')
-    parser.add_argument('password', help='specifies the password to hash')
+    parser.add_argument('password', help='specifies the password to hash', nargs='?', default='')
     args = parser.parse_args()
 
     assert pwd_context, 'Cannot hash passwords because passlib is missing! Install it via "pip3 install passlib".'
-    assert args.password, "Password cannot be empty!"
-    print(pwd_context.encrypt(args.password))
+
+    password = args.password
+
+    # If no password was given, enter one on the command line
+    if not password:
+        password = getpass.getpass()
+
+    password = password.strip()
+    assert password, "Password cannot be empty!"
+    print(pwd_context.encrypt(password))
diff --git a/setup.py b/setup.py
index dba314f..fb0e357 100644
--- a/setup.py
+++ b/setup.py
@@ -97,5 +97,5 @@ setup(
     package_dir = {'pylinkirc': '.'},
 
     # Executable scripts
-    scripts=["pylink"],
+    scripts=["pylink", "pylink-mkpasswd"],
 )
